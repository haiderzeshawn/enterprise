# Sudoers rules for vwdev-lphp group

# Define network command aliases
Cmnd_Alias CONNECTIVITY_CMDS = /usr/bin/ping *, /usr/bin/traceroute *, /usr/bin/tracepath *, /usr/bin/mtr *
Cmnd_Alias DNS_CMDS = /usr/bin/dig *, /usr/bin/nslookup *, /usr/bin/host *, /usr/bin/whois *
Cmnd_Alias SOCKET_CMDS = /usr/bin/telnet *, /usr/bin/nc *, /usr/bin/netcat *
Cmnd_Alias PACKET_ANALYSIS = /usr/bin/tcpdump *, /usr/sbin/tcpdump *, /usr/bin/nmap *
Cmnd_Alias NETWORK_INFO = /usr/bin/netstat *, /usr/bin/ss *, /usr/bin/ip *, /usr/sbin/ip *, /usr/bin/ifconfig *, /usr/sbin/ifconfig *, /usr/bin/arp *, /usr/sbin/arp *, /usr/bin/route *, /usr/sbin/route *
Cmnd_Alias WEB_TOOLS = /usr/bin/curl *, /usr/bin/wget *
Cmnd_Alias FIREWALL = /usr/sbin/iptables *

# Allow vwdev-lphp group to run specific commands on /var/www
%vwdev-lphp ALL= NOPASSWD: /usr/bin/rsync * /var/www/*
%vwdev-lphp ALL= NOPASSWD: /usr/bin/rsync * /var/www/* *

# rm (Remove files in /var/www)
%vwdev-lphp ALL= NOPASSWD: /bin/rm -rf /var/www/*, /bin/rm -f /var/www/*, /bin/rm -r /var/www/*

# chmod/chown (Change file permissions and ownership in /var/www)
%vwdev-lphp ALL= NOPASSWD: /bin/chmod * /var/www/*, /bin/chmod -R * /var/www/*
%vwdev-lphp ALL= NOPASSWD: /bin/chown * /var/www/*, /bin/chown -R * /var/www/*

# unzip / zip (Archive and unarchive files in /var/www)
%vwdev-lphp ALL= NOPASSWD: /usr/bin/unzip * -d /var/www/*
%vwdev-lphp ALL= NOPASSWD: /usr/bin/zip -r * /var/www/*

# tar (Archive and unarchive files in /var/www)
%vwdev-lphp ALL= NOPASSWD: /usr/bin/tar -xzf * -C /var/www/*
%vwdev-lphp ALL= NOPASSWD: /usr/bin/tar -czf * /var/www/*
%vwdev-lphp ALL= NOPASSWD: /usr/bin/tar -xf * -C /var/www/*
%vwdev-lphp ALL= NOPASSWD: /usr/bin/tar -cf * /var/www/*

# mkdir (Make directories in /var/www)
%vwdev-lphp ALL= NOPASSWD: /bin/mkdir -p /var/www/*

# Editors (Allow editing files in /var/www using vi, vim, nano)
%vwdev-lphp ALL= NOPASSWD: /usr/bin/vim /var/www/*
%vwdev-lphp ALL= NOPASSWD: /usr/bin/vi /var/www/*
%vwdev-lphp ALL= NOPASSWD: /usr/bin/nano /var/www/*

# touch (Create or modify timestamps of files in /var/www)
%vwdev-lphp ALL= NOPASSWD: /usr/bin/touch /var/www/*

# cp/mv/scp (Copy, move, and secure copy files in /var/www)
%vwdev-lphp ALL= NOPASSWD: /bin/cp * /var/www/*
%vwdev-lphp ALL= NOPASSWD: /usr/bin/cp * /var/www/*
%vwdev-lphp ALL= NOPASSWD: /bin/mv * /var/www/*
%vwdev-lphp ALL= NOPASSWD: /usr/bin/mv * /var/www/*
%vwdev-lphp ALL= NOPASSWD: /usr/bin/scp * /var/www/*

# Git (Allow git operations within the directory)
%vwdev-lphp ALL= NOPASSWD: /usr/bin/git * /var/www/*
%vwdev-lphp ALL= NOPASSWD: /usr/bin/git -C /var/www/* *

# Composer (Allow composer operations in /var/www)
%vwdev-lphp ALL= NOPASSWD: /usr/bin/composer * /var/www/[A-Za-z0-9_/.-]*
%vwdev-lphp ALL= NOPASSWD: /usr/local/bin/composer * /var/www/[A-Za-z0-9_/.-]*

# Dotnet (Allow running .NET commands in /var/www)
%vwdev-lphp ALL=(ALL) NOPASSWD: /usr/bin/dotnet publish -c Release -o /var/www/*, \
/usr/bin/dotnet build /var/www/*, \
/usr/bin/dotnet restore /var/www/*, \
/usr/bin/dotnet run /var/www/*, \
/usr/bin/dotnet test /var/www/*, \
/usr/bin/dotnet clean /var/www/*, \
/usr/bin/dotnet pack /var/www/*
